<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CodeLearn: Interactive Coding Platform</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f2f3f8; }
    #header { background: #283593; color: white; padding: 12px; text-align: center; }
    #main { max-width: 900px; margin: 30px auto; background: white; box-shadow: 0 0 10px #bbb; padding: 30px; }
    #editor { width: 100%; height: 170px; font-family: 'Fira Mono', monospace; font-size: 16px; }
    #output { background: #212121; color: #fdf6e3; padding: 16px; min-height: 36px; margin-top: 20px; }
    #feedback { color: #c62828; margin-top: 12px; }
    button { background: #1976d2; color: white; border: none; padding: 10px 20px; margin-top: 8px; cursor: pointer; }
    .exercise-box { margin-top: 30px; background: #eff3fb; border-left: 4px solid #1976d2; padding: 18px; }
    .correct { color: #2e7d32; }
  </style>
</head>
<body>
  <div id="header">
    <h1>CodeLearn</h1>
    <p>Learn, Practice, and Debug JavaScript</p>
  </div>
  <div id="main">
    <div class="exercise-box" id="exercise">
      <strong>Exercise:</strong> Write a function that returns the sum of two numbers.<br>
      <em>Example:</em> <code>sum(2, 3)</code> should return <code>5</code>.
    </div>
    <textarea id="editor">// Write your code here!
function sum(a, b) {
  return a + b;
}
</textarea>
    <button onclick="runCode()">Run Code</button>
    <button onclick="analyzeCode()">Analyze</button>
    <div id="output"></div>
    <div id="feedback"></div>
  </div>
  <script>
    // Run user code and show output/result
    function runCode() {
      let code = document.getElementById("editor").value;
      let outputDiv = document.getElementById("output");
      let feedbackDiv = document.getElementById("feedback");
      outputDiv.innerHTML = '';
      feedbackDiv.innerHTML = '';
      try {
        // attempting to execute user code securely
        let func = new Function(code + "; output = sum(2,3);");
        let output;
        func();
        outputDiv.innerHTML = "sum(2, 3) = " + output;
        if (output === 5) {
          feedbackDiv.innerHTML = "<span class='correct'>Great job! Your function works as expected.</span>";
        } else {
          feedbackDiv.textContent = "The result is not correct for sum(2, 3).";
        }
      } catch (e) {
        // error detection and feedback
        feedbackDiv.textContent = "Error: " + e.message;
      }
    }

    // Analyze code for syntax hints, errors, and suggestions
    function analyzeCode() {
      let code = document.getElementById("editor").value;
      let feedbackDiv = document.getElementById("feedback");
      feedbackDiv.innerHTML = '';
      // Simple code hint: check if a function named 'sum' exists
      if (!/function\s+sum\s*\(/.test(code)) {
        feedbackDiv.textContent = "Hint: Did you define a function named 'sum'?";
        return;
      }
      // Check for return statement
      if (!/return\s+/.test(code)) {
        feedbackDiv.textContent = "Hint: Did you remember to use a return statement in your function?";
        return;
      }
      feedbackDiv.innerHTML = "No syntax issues found. Ready to test your code!";
    }
  </script>
</body>
</html>